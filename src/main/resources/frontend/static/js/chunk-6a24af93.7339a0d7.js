(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a24af93"],{2637:function(e,t,l){},5154:function(e,t,l){"use strict";var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",[l("div",{staticClass:"interface-title"},[e._v("拦截配置")]),e._v(" "),l("el-form",{attrs:{data:e.proxyConfig,inline:!0,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"拦截路径",rules:[{required:!0}]}},[l("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.proxyConfig.interceptPath,callback:function(t){e.$set(e.proxyConfig,"interceptPath","string"===typeof t?t.trim():t)},expression:"proxyConfig.interceptPath"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"转发host",rules:[{required:!0}]}},[l("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.proxyConfig.forwardHost,callback:function(t){e.$set(e.proxyConfig,"forwardHost","string"===typeof t?t.trim():t)},expression:"proxyConfig.forwardHost"}})],1)],1),e._v(" "),l("el-form",{attrs:{data:e.proxyConfig,inline:!0,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"mock条件",rules:[{required:!1}]}},[l("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.proxyConfig.mockRequir,callback:function(t){e.$set(e.proxyConfig,"mockRequir","string"===typeof t?t.trim():t)},expression:"proxyConfig.mockRequir"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"mock返回",rules:[{required:!1}]}},[l("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.proxyConfig.mockResponse,callback:function(t){e.$set(e.proxyConfig,"mockResponse","string"===typeof t?t.trim():t)},expression:"proxyConfig.mockResponse"}})],1)],1),e._v(" "),l("el-form",{attrs:{data:e.proxyConfig,inline:!0,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"是否回调",rules:[{required:!0}]}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.proxyConfig.isCallback,callback:function(t){e.$set(e.proxyConfig,"isCallback",t)},expression:"proxyConfig.isCallback"}})],1)],1),e._v(" "),e.proxyConfig.isCallback?l("div",{staticStyle:{width:"100%"}},[l("div",{staticClass:"interface-title"},[e._v("回调信息")]),e._v(" "),l("div",{staticClass:"base_row_edit"},[l("el-form",{ref:"form1",attrs:{model:e.proxyConfig,inline:!0,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"回调host",rules:[{required:!0}]}},[l("el-input",{staticStyle:{width:"300px"},model:{value:e.proxyConfig.callbackHost,callback:function(t){e.$set(e.proxyConfig,"callbackHost",t)},expression:"proxyConfig.callbackHost"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"615px"},attrs:{label:"回调路径",rules:[{required:!0}]}},[l("el-input",{staticStyle:{width:"300px"},model:{value:e.proxyConfig.callbackPath,callback:function(t){e.$set(e.proxyConfig,"callbackPath",t)},expression:"proxyConfig.callbackPath"}},[l("el-select",{staticStyle:{width:"90px",margin:"-10px -30px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.proxyConfig.callbackMethod,callback:function(t){e.$set(e.proxyConfig,"callbackMethod",t)},expression:"proxyConfig.callbackMethod"}},[l("el-option",{attrs:{label:"get",value:"get"}}),e._v(" "),l("el-option",{attrs:{label:"post",value:"post"}}),e._v(" "),l("el-option",{attrs:{label:"put",value:"put"}}),e._v(" "),l("el-option",{attrs:{label:"delete",value:"delete"}})],1)],1)],1)],1),e._v(" "),l("el-form",{attrs:{model:e.proxyConfig,inline:!0,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"sign方式",rules:[{required:!0}]}},[l("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.proxyConfig.signType,callback:function(t){e.$set(e.proxyConfig,"signType",t)},expression:"proxyConfig.signType"}},[l("el-option",{attrs:{label:"无sign",value:1}}),e._v(" "),l("el-option",{attrs:{label:"md5加密,请求体添加sign",value:2}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"clientSecret"}},[l("el-input",{staticStyle:{width:"300px"},model:{value:e.proxyConfig.clientSecret,callback:function(t){e.$set(e.proxyConfig,"clientSecret",t)},expression:"proxyConfig.clientSecret"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"interface-title",staticStyle:{"margin-top":"30px"}},[e._v("请求参数")]),e._v(" "),l("div",{staticStyle:{width:"90%","margin-left":"40px","text-align":"center"}},[l("el-radio-group",{model:{value:e.proxyConfig.callbackBodyType,callback:function(t){e.$set(e.proxyConfig,"callbackBodyType",t)},expression:"proxyConfig.callbackBodyType"}},[l("el-radio-button",{attrs:{label:"Json"}}),e._v(" "),l("el-radio-button",{attrs:{label:"Query"}}),e._v(" "),l("el-radio-button",{attrs:{label:"Form"}})],1)],1),e._v(" "),l("div",{staticClass:"quest_edit"},[l("el-tabs",[l("el-tab-pane",{attrs:{label:"请求头"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.proxyConfig.callbackHeaders,size:"mini"}},[l("el-table-column",{attrs:{align:"center",fixed:"left",width:"95"},scopedSlots:e._u([{key:"header",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addHeader}},[e._v("新增")])]}},{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"danger",plain:"",circle:"",icon:"el-icon-minus"},on:{click:function(l){return e.deleteHeader(t.$index)}}})]}}],null,!1,1055554260)}),e._v(" "),l("el-table-column",{attrs:{label:"Header"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"Header"},model:{value:t.row.headerKey,callback:function(l){e.$set(t.row,"headerKey",l)},expression:"scope.row.headerKey"}})]}}],null,!1,3661741079)}),e._v(" "),l("el-table-column",{attrs:{label:"Value"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"Value"},model:{value:t.row.headerValue,callback:function(l){e.$set(t.row,"headerValue",l)},expression:"scope.row.headerValue"}})]}}],null,!1,2980096927)}),e._v(" "),l("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"备注"},model:{value:t.row.description,callback:function(l){e.$set(t.row,"description",l)},expression:"scope.row.description"}})]}}],null,!1,756486281)})],1)],1),e._v(" "),"Json"===e.proxyConfig.callbackBodyType?l("el-tab-pane",{attrs:{label:"Json参数"}},[l("el-button",{on:{click:e.jsonImport}},[e._v("json导入")]),e._v(" "),l("object-list",{attrs:{list:e.proxyConfig.callbackRequestJson,depth:0}})],1):e._e(),e._v(" "),"Query"===e.proxyConfig.callbackBodyType?l("el-tab-pane",{attrs:{label:"Query参数"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.proxyConfig.callbackRequestQuery,size:"mini"}},[l("el-table-column",{attrs:{align:"center",fixed:"left",width:"95"},scopedSlots:e._u([{key:"header",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addBody}},[e._v("新增")])]}},{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"danger",plain:"",circle:"",icon:"el-icon-minus"},on:{click:function(l){return e.deleteBody(t.$index)}}})]}}],null,!1,3364106356)}),e._v(" "),l("el-table-column",{attrs:{label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"参数名称"},model:{value:t.row.key,callback:function(l){e.$set(t.row,"key",l)},expression:"scope.row.key"}})]}}],null,!1,1114794648)}),e._v(" "),l("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"参数值"},model:{value:t.row.value,callback:function(l){e.$set(t.row,"value",l)},expression:"scope.row.value"}})]}}],null,!1,3781624581)}),e._v(" "),l("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"备注"},model:{value:t.row.description,callback:function(l){e.$set(t.row,"description",l)},expression:"scope.row.description"}})]}}],null,!1,756486281)})],1)],1):e._e(),e._v(" "),"Form"===e.proxyConfig.callbackBodyType?l("el-tab-pane",{attrs:{label:"Form参数"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.proxyConfig.callbackRequestForm,size:"mini"}},[l("el-table-column",{attrs:{align:"center",fixed:"left",width:"95"},scopedSlots:e._u([{key:"header",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-plus"},on:{click:e.addBody}},[e._v("新增")])]}},{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"small",type:"danger",plain:"",circle:"",icon:"el-icon-minus"},on:{click:function(l){return e.deleteBody(t.$index)}}})]}}],null,!1,3364106356)}),e._v(" "),l("el-table-column",{attrs:{label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"参数名称"},model:{value:t.row.key,callback:function(l){e.$set(t.row,"key",l)},expression:"scope.row.key"}})]}}],null,!1,1114794648)}),e._v(" "),l("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"参数值"},model:{value:t.row.value,callback:function(l){e.$set(t.row,"value",l)},expression:"scope.row.value"}})]}}],null,!1,3781624581)}),e._v(" "),l("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{placeholder:"备注"},model:{value:t.row.description,callback:function(l){e.$set(t.row,"description",l)},expression:"scope.row.description"}})]}}],null,!1,756486281)})],1)],1):e._e()],1)],1)]):e._e(),e._v(" "),l("el-dialog",{attrs:{width:"950px",title:"导入json",visible:e.importJson.visibleapi},on:{"update:visible":function(t){return e.$set(e.importJson,"visibleapi",t)}}},[l("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.importJson.jsonString,callback:function(t){e.$set(e.importJson,"jsonString",t)},expression:"importJson.jsonString"}}),e._v(" "),l("el-button",{staticStyle:{"margin-top":"5px"},on:{click:function(t){return e.importJ()}}},[e._v("导入")])],1),e._v(" "),l("el-button",{staticStyle:{margin:"20px"},attrs:{type:"primary"},on:{click:e.saveConfig}},[e._v("保存")])],1)])},i=[],n=l("da71"),a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",e._l(e.list,(function(t,o){return l("div",{staticClass:"list-item"},[l("div",{directives:[{name:"show",rawName:"v-show",value:"#root"===t.key||e.isShow,expression:"item.key=== '#root' ? true:isShow"}],staticStyle:{display:"flex","text-align":"right"}},[l("div",{staticClass:"key-input",staticStyle:{width:"50%"}},[l("div",["object"!==t.type&&"array"!==t.type||"#root"===t.key?e._e():l("i",{class:0==t.show?e.foldcon:e.unfoldcon,on:{click:function(l){return e.fold(t,t.show)}}}),e._v(" "),l("el-input",{style:e.indent,attrs:{size:"mini",disabled:"#root"===t.key||"#items"===t.key},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"item.key"}})],1)]),e._v(" "),l("div",{staticStyle:{width:"95px","margin-left":"5px","margin-top":"5px"}},[l("el-select",{attrs:{slot:"prepend"},on:{change:function(l){return e.changeSelect(t)}},slot:"prepend",model:{value:t.type,callback:function(l){e.$set(t,"type",l)},expression:"item.type"}},[l("el-option",{attrs:{label:"object",value:"object"}}),e._v(" "),l("el-option",{attrs:{label:"array",value:"array"}}),e._v(" "),l("el-option",{attrs:{label:"string",value:"string"}}),e._v(" "),l("el-option",{attrs:{label:"int",value:"int"}}),e._v(" "),l("el-option",{attrs:{label:"boolean",value:"boolean"}})],1)],1),e._v(" "),l("div",{staticStyle:{width:"20%","margin-left":"5px","margin-top":"5px"}},[l("el-input",{attrs:{placeholder:"value",disabled:"object"===t.type||"array"===t.type},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"item.value"}})],1),e._v(" "),l("div",{staticStyle:{width:"20%","margin-left":"5px","margin-top":"5px"}},[l("el-input",{attrs:{placeholder:"描述"},model:{value:t.description,callback:function(l){e.$set(t,"description",l)},expression:"item.description"}})],1),e._v(" "),l("div",{staticStyle:{width:"10%",display:"flex","margin-left":"5px","margin-top":"12px"}},["#root"!==t.key?l("div",{staticStyle:{"margin-right":"5px"}},[l("el-button",{staticClass:"el-icon-delete-solid",on:{click:function(l){return e.del(t.key,t.num)}}})],1):e._e(),e._v(" "),l("div",["object"===t.type||"array"===t.type?l("el-button",{staticClass:"el-icon-plus",on:{click:function(l){return e.add(t,o)}}}):e._e()],1),e._v(" "),l("div",["object"===t.type&&"#root"!==t.key?l("el-button",{staticClass:"el-icon-document-copy",on:{click:function(l){return e.copy(t)}}}):e._e()],1)])]),e._v(" "),t.children?l("div",{staticClass:"children-item"},[l("object-list",{attrs:{list:t.children,depth:e.depth+1,isShow:null==t.show||t.show}})],1):e._e()])})),0)},r=[],s=l("2d63"),c=1,u={name:"ObjectList",props:["list","depth","isShow"],computed:{indent:function(){return{width:100-6*this.depth+"%"}}},data:function(){return{unfoldcon:"el-icon-caret-bottom",foldcon:"el-icon-caret-right"}},methods:{changeSelect:function(e){null!=e.children&&this.$delete(e,"children"),"array"===e.type&&(!e.children&&this.$set(e,"children",[]),e.children&&e.children.push({num:Math.floor(1e5*Math.random())+c,key:"#items",value:"",type:"object",description:"",children:[]}))},del:function(e,t){for(var l in this.list)(this.list.length>1||"#items"!=e)&&this.list[l].num==t&&this.list.splice(l,1)},add:function(e,t){"array"===e.type?(!e.children&&this.$set(e,"children",[]),e.children&&e.children.push({num:Math.floor(1e5*Math.random())+c,key:"#items",value:"",type:"object",description:"",children:[]})):(!e.children&&this.$set(e,"children",[]),e.children&&e.children.push({num:Math.floor(1e5*Math.random())+c,key:"test"+c++,value:"",type:"string",description:"",children:[]}))},fold:function(e,t){var l=null==t||t;if(e.children){var o,i=Object(s["a"])(e.children);try{for(i.s();!(o=i.n()).done;){var n=o.value;this.fold(n,l)}}catch(a){i.e(a)}finally{i.f()}}this.$set(e,"show",!l)},copy:function(e){var t=JSON.parse(JSON.stringify(e));t.num=Math.floor(1e5*Math.random())+c,this.list.push(t)}}},p=u,d=(l("73ef"),l("2877")),f=Object(d["a"])(p,a,r,!1,null,"27146066",null),y=f.exports,b={props:{isAdd:Boolean},components:{ObjectList:y},data:function(){return{importJson:{visibleapi:!1,jsonString:""},proxyConfig:{id:void 0,projectId:this.$store.state.project.id,description:"",interceptPath:"",forwardHost:"",status:!0,mockRequir:"",mockResponse:"",isCallback:!1,callbackHost:"",callbackPath:"",callbackMethod:"get",signType:1,clientSecret:"",clientId:"",callbackHeaders:[{headerKey:"Content-Type",headerValue:"application/json",description:""}],callbackBodyType:"Json",callbackRequestJson:[{num:1,type:"object",value:"",key:"#root",description:"",children:[]}],callbackRequestQuery:[],callbackRequestForm:[]}}},created:function(){var e=this;this.isAdd||Object(n["c"])({id:this.$route.params.configId}).then((function(t){e.proxyConfig=t.data[0]}))},methods:{saveProjectSuccess:function(e){var t=this;this.$notify.success(e),this.$store.dispatch("tagsView/delView",this.$store.state.tagsView.visitedViews.filter((function(e){return e.path===t.$route.path}))[0]),this.$router.back()},saveConfig:function(){var e=this;this.isAdd?Object(n["a"])(this.proxyConfig).then((function(t){e.saveProjectSuccess(t.msg)})):Object(n["e"])(this.proxyConfig).then((function(t){e.saveProjectSuccess(t.msg)}))},addHeader:function(){this.proxyConfig.callbackHeaders.push({headerKey:"",headerValue:"",description:""})},deleteHeader:function(e){this.proxyConfig.callbackHeaders.splice(e,1)},jsonImport:function(){this.importJson.visibleapi=!0},importJ:function(){var e=this;Object(n["d"])(this.importJson).then((function(t){e.$set(e.proxyConfig.callbackRequestJson,0,t.data),e.$message({message:t.msg,type:"success"}),e.importJson.visibleapi=!1}))},addBody:function(){"Query"===this.proxyConfig.callbackBodyType&&this.proxyConfig.callbackRequestQuery.push({key:"",value:"",description:""}),"Form"===this.proxyConfig.callbackBodyType&&this.proxyConfig.callbackRequestForm.push({key:"",value:"",description:""})},deleteBody:function(e){"Query"===this.proxyConfig.callbackBodyType&&this.proxyConfig.callbackRequestQuery.splice(e,1),"Form"===this.proxyConfig.callbackBodyType&&this.proxyConfig.callbackRequestForm.splice(e,1)}}},h=b,m=(l("9093b"),Object(d["a"])(h,o,i,!1,null,"34c40fd4",null));t["a"]=m.exports},"73ef":function(e,t,l){"use strict";l("c944")},"9093b":function(e,t,l){"use strict";l("2637")},"9ca6":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("save-config",{attrs:{"is-add":!1}})],1)},i=[],n=l("5154"),a={name:"UpdateConfig",components:{SaveConfig:n["a"]}},r=a,s=l("2877"),c=Object(s["a"])(r,o,i,!1,null,"24d563bf",null);t["default"]=c.exports},c944:function(e,t,l){},da71:function(e,t,l){"use strict";l.d(t,"a",(function(){return i})),l.d(t,"b",(function(){return n})),l.d(t,"e",(function(){return a})),l.d(t,"c",(function(){return r})),l.d(t,"d",(function(){return s}));var o=l("b775");function i(e){return Object(o["a"])({method:"post",url:"/config/add",data:e})}function n(e){return Object(o["a"])({method:"delete",url:"/config/".concat(e)})}function a(e){return Object(o["a"])({method:"post",url:"/config/update",data:e})}function r(e){return Object(o["a"])({method:"post",url:"/config/list",params:e})}function s(e){return Object(o["a"])({method:"post",url:"/config/importJson",data:e})}}}]);